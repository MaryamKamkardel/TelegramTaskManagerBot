<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0" version="26.2.13">
  <diagram name="Page-1" id="ad52d381-51e7-2e0d-a935-2d0ddd2fd229">
    <mxGraphModel dx="6057" dy="2269" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="3000" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2c924340bb9dbf6c-2" value="تنور دلگرمی" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" parent="1" vertex="1">
          <mxGeometry x="300" y="770" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2c924340bb9dbf6c-3" target="ElqqVzK_Yuj_ti55asgk-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-3" value="&lt;span&gt;پرونده خانواده ها&lt;/span&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;rotation=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="770" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-4" value="Hello&amp;nbsp;&lt;div&gt;Elementir&amp;nbsp;&lt;/div&gt;&lt;div&gt;Theme&amp;nbsp;&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" parent="1" vertex="1">
          <mxGeometry x="570" y="920" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-5" value="&lt;span&gt;ثبت نیکوکاران&lt;/span&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" parent="1" vertex="1">
          <mxGeometry x="320" y="1040" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-31" value="Post Type 2" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12" parent="1" source="2c924340bb9dbf6c-4" target="2c924340bb9dbf6c-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-32" value="Post Type 1" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12" parent="1" source="2c924340bb9dbf6c-4" target="2c924340bb9dbf6c-3" edge="1">
          <mxGeometry x="0.0021" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-33" value="Post Type 4" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12" parent="1" source="2c924340bb9dbf6c-4" target="2c924340bb9dbf6c-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-60" value="&lt;span&gt;داوطلبان&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" parent="1" vertex="1">
          <mxGeometry x="280" y="950" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2c924340bb9dbf6c-76" value="Post Type 3" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12" parent="1" source="2c924340bb9dbf6c-4" target="2c924340bb9dbf6c-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-1" value="Post Type 5" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.6;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="825" y="990" as="sourcePoint" />
            <mxPoint x="860" y="1030" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-2" value="&lt;span&gt;کالای های دریافتی&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" vertex="1" parent="1">
          <mxGeometry x="360" y="1180" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-4" value="&lt;span&gt;صندوق صدقات&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" vertex="1" parent="1">
          <mxGeometry x="430" y="1280" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-5" value="Post Type 6" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-4">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="640" y="1050" as="sourcePoint" />
            <mxPoint x="670" y="1140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-7" value="Woocomerce" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1220" y="790" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-8" value="محصولات&amp;nbsp;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1310" y="610" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-9" value="دسته بندی ها&amp;nbsp;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1550" y="780" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-10" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="1030" as="sourcePoint" />
            <mxPoint x="820" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-11" value="درگاه های پرداخت&amp;nbsp;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1560" y="1010" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-12" value="&lt;span&gt;قلک&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" vertex="1" parent="1">
          <mxGeometry x="520" y="1370" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-13" value="Post Type 7" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=0.95;exitY=0.708;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="682" y="1032" as="sourcePoint" />
            <mxPoint x="655" y="1220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-14" value="&lt;span&gt;کمپین ها&lt;/span&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="690" y="1320" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-15" value="Post Type 8" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=1.017;exitY=0.625;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="694" y="1015" as="sourcePoint" />
            <mxPoint x="760" y="1215" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-16" value="&lt;span&gt;واریز های نقدی و کارت به کارت&lt;/span&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="930" y="1305" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-17" value="Post Type 9" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=1.026;exitY=0.57;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" edge="1" parent="1" source="2c924340bb9dbf6c-4" target="ElqqVzK_Yuj_ti55asgk-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="702" y="1005" as="sourcePoint" />
            <mxPoint x="933" y="1189" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-18" value="&lt;span&gt;رستوران های حامی&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1140" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-22" value="Post Type 10" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;exitX=1.026;exitY=0.57;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitPerimeter=0;" edge="1" parent="1" target="ElqqVzK_Yuj_ti55asgk-18">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="690" y="982" as="sourcePoint" />
            <mxPoint x="1000" y="1280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-23" value="&lt;span&gt;تهیه ی اقلام مورد نیاز&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;comic=0;labelBackgroundColor=none;strokeWidth=2;fontFamily=Verdana;fontSize=12;align=center;arcSize=50;" vertex="1" parent="1">
          <mxGeometry x="1260" y="1110" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-24" value="Post Type 11" style="edgeStyle=none;rounded=1;html=1;labelBackgroundColor=none;startArrow=none;startFill=0;startSize=5;endArrow=classicThin;endFill=1;endSize=5;jettySize=auto;orthogonalLoop=1;strokeColor=#B3B3B3;strokeWidth=1;fontFamily=Verdana;fontSize=12;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" target="ElqqVzK_Yuj_ti55asgk-23">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="690" y="980" as="sourcePoint" />
            <mxPoint x="1090" y="1155" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-26" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-weight: normal;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;پرونده ی خانواده های تحت حمایت :&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-weight: normal;&quot;&gt;معماری که برای پیاده سازی این بخضش استفاده شد به این صورت است که ادمین با ایجاد یک خانواده و ذخیره ی آن یک صفحه برای خانواده ایجاد میشود و در عین حال این خانواده به محصولات در ووکامرس اضافه میگردد تا کاربر بتواند پرداخت انجام دهد&lt;/span&gt;&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;align=right;" vertex="1" parent="1">
          <mxGeometry x="810" y="680" width="410" height="150" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-27" target="ElqqVzK_Yuj_ti55asgk-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-27" value="ایجاد خانواده توسط ادمین" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-28" target="ElqqVzK_Yuj_ti55asgk-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-28" target="ElqqVzK_Yuj_ti55asgk-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-28" target="ElqqVzK_Yuj_ti55asgk-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-28" value="اضافه شدن خودکار اون خانواده به محصولات به صورت خودکار با ثبت خانواده توسط ادمین&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-29" value="فراخوانی اطلاعات وارد شده ی متافیلد های پست تایپ هر خانواده در قالب&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-30" target="ElqqVzK_Yuj_ti55asgk-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-30" value="فراخوانی محصول اون خانواده در قالب&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-31" target="ElqqVzK_Yuj_ti55asgk-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-31" value="ایجاد فیلد وارد کردن رقم دلخواه کاربر و ثبت شدن اون مبلغ در سبد خرید برای پرداخت" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-37" value="با استفاده از کد نویسی و ایجاد شورت کد انجام شد&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-39" target="ElqqVzK_Yuj_ti55asgk-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="570" />
              <mxPoint x="1180" y="510" />
              <mxPoint x="1250" y="510" />
              <mxPoint x="1250" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-39" value="با استفاده از کد نویسی و ایجاد شورت کد انجام شد&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-41" target="ElqqVzK_Yuj_ti55asgk-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-41" value="قالب نهایی پرونده خانواده ها&amp;nbsp;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="1260" y="450" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-42" value="نمایش به کاربر" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1430" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.376;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-37" target="ElqqVzK_Yuj_ti55asgk-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="480" />
              <mxPoint x="1180" y="490" />
              <mxPoint x="1250" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.017;entryY=0.318;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-29" target="ElqqVzK_Yuj_ti55asgk-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1220" y="390" />
              <mxPoint x="1220" y="475" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.58;entryY=0.992;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-26" target="ElqqVzK_Yuj_ti55asgk-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-48" value="Container" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="-1950" y="170" width="770" height="1420" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-49" value="&lt;div&gt;add_shortcode(&#39;display_custom_price_product&#39;, function() {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; ob_start();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $current_post_title = get_the_title();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $related_product = get_page_by_title($current_post_title, OBJECT, &#39;product&#39;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if ($related_product) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product_id = $related_product-&amp;gt;ID;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product = wc_get_product($product_id);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // پردازش فرم اگر ارسال شده باشد&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($_SERVER[&#39;REQUEST_METHOD&#39;] === &#39;POST&#39; &amp;amp;&amp;amp; isset($_POST[&#39;custom_price&#39;])) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $custom_price = floatval($_POST[&#39;custom_price&#39;]);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; WC()-&amp;gt;session-&amp;gt;set(&#39;custom_price_&#39; . $product_id, $custom_price);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; WC()-&amp;gt;cart-&amp;gt;add_to_cart($product_id);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; wp_redirect(wc_get_cart_url());&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; exit;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ?&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;div class=&quot;custom-price-product-container&quot;&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;div class=&quot;product-info&quot;&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;h3&amp;gt;&amp;lt;?php echo esc_html($product-&amp;gt;get_name()); ?&amp;gt;&amp;lt;/h3&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;p class=&quot;product-original-price&quot;&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; قیمت پایه: &amp;lt;?php echo $product-&amp;gt;get_price_html(); ?&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;/p&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;form method=&quot;post&quot; class=&quot;custom-price-form&quot;&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;label for=&quot;custom_price&quot;&amp;gt;قیمت پیشنهادی شما(ریال):&amp;lt;/label&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;input type=&quot;number&quot; name=&quot;custom_price&quot; id=&quot;custom_price&quot;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;min=&quot;0&quot; step=&quot;0.01&quot; required&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;button type=&quot;submit&quot; class=&quot;custom-price-button&quot;&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; پرداخت با قیمت پیشنهادی&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;/button&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;/form&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;lt;?php&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; } else {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; echo &#39;&amp;lt;p&amp;gt;محصول مرتبطی یافت نشد.&amp;lt;/p&amp;gt;&#39;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; return ob_get_clean();&lt;/div&gt;&lt;div&gt;});&lt;/div&gt;&lt;div&gt;// تغییر قیمت در سبد خرید&lt;/div&gt;&lt;div&gt;add_action(&#39;woocommerce_before_calculate_totals&#39;, &#39;apply_custom_price_to_cart_item&#39;);&lt;/div&gt;&lt;div&gt;function apply_custom_price_to_cart_item($cart) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (is_admin() &amp;amp;&amp;amp; !defined(&#39;DOING_AJAX&#39;)) return;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; foreach ($cart-&amp;gt;get_cart() as $cart_item) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product_id = $cart_item[&#39;product_id&#39;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $custom_price = WC()-&amp;gt;session-&amp;gt;get(&#39;custom_price_&#39; . $product_id);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($custom_price) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $cart_item[&#39;data&#39;]-&amp;gt;set_price($custom_price);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// حذف قیمت سفارشی پس از تکمیل سفارش&lt;/div&gt;&lt;div&gt;add_action(&#39;woocommerce_checkout_order_processed&#39;, &#39;clear_custom_prices&#39;);&lt;/div&gt;&lt;div&gt;function clear_custom_prices() {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; foreach (WC()-&amp;gt;cart-&amp;gt;get_cart() as $cart_item) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; WC()-&amp;gt;session-&amp;gt;__unset(&#39;custom_price_&#39; . $cart_item[&#39;product_id&#39;]);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=18;" vertex="1" parent="ElqqVzK_Yuj_ti55asgk-48">
          <mxGeometry x="10" y="60" width="760" height="1350" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-51" value="Container" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="-1120" y="170" width="840" height="1920" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-52" value="&lt;div&gt;add_action(&#39;wp_after_insert_post&#39;, &#39;create_woocommerce_product_from_family&#39;, 10, 4);&lt;/div&gt;&lt;div&gt;function create_woocommerce_product_from_family($post_id, $post, $update, $post_before) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // فقط برای پست تایپ &quot;پرونده ی خانواده ها&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (&#39;family-files&#39; !== $post-&amp;gt;post_type &amp;amp;&amp;amp; &#39;tanoor-delgarmy&#39; !== $post-&amp;gt;post_type) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: collapse;&quot;&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // فقط زمانی که پست منتشر می‌شود (نه پیش‌نویس، نه سطل زباله)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (&#39;publish&#39; !== $post-&amp;gt;post_status) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // جلوگیری از اجرا در موارد غیرضروری&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (defined(&#39;DOING_AUTOSAVE&#39;) &amp;amp;&amp;amp; DOING_AUTOSAVE) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (!current_user_can(&#39;edit_post&#39;, $post_id)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // بررسی آیا این اولین انتشار است یا به‌روزرسانی&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $is_new_post = false;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if ($post_before &amp;amp;&amp;amp; &#39;publish&#39; !== $post_before-&amp;gt;post_status &amp;amp;&amp;amp; &#39;publish&#39; === $post-&amp;gt;post_status) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $is_new_post = true;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // اگر این یک به‌روزرسانی است و محصول قبلاً ایجاد شده، بررسی می‌کنیم آیا نیاز به به‌روزرسانی دارد&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $existing_product_id = get_post_meta($post_id, &#39;_created_product_id&#39;, true);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (!$is_new_post &amp;amp;&amp;amp; $existing_product_id) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // دریافت مقادیر فیلدهای متا&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $product_name = get_post_meta($post_id, &#39;product_name&#39;, true);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $product_price = get_post_meta($post_id, &#39;product_price&#39;, true);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; $product_category_name = get_post_meta($post_id, &#39;product_category&#39;, true);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; // بررسی اینکه آیا مقادیر لازم وجود دارند&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (empty($product_name) || empty($product_price)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; try {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // اگر محصول قبلاً وجود دارد، آن را بارگیری کنید&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product = $existing_product_id ? wc_get_product($existing_product_id) : new WC_Product_Simple();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if (!$product) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product = new WC_Product_Simple();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // تنظیم اطلاعات پایه محصول&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product-&amp;gt;set_name($product_name);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product-&amp;gt;set_price($product_price);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product-&amp;gt;set_regular_price($product_price);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // مدیریت دسته‌بندی‌ها بر اساس نام&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if (!empty($product_category_name)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $category_term = get_term_by(&#39;name&#39;, $product_category_name, &#39;product_cat&#39;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if (!$category_term) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $new_category = wp_insert_term(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product_category_name,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &#39;product_cat&#39;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; array(&#39;description&#39; =&amp;gt; &#39;دسته‌بندی ایجاد شده خودکار برای &#39; . $product_name)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; );&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if (!is_wp_error($new_category)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $category_id = $new_category[&#39;term_id&#39;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } else {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $category_id = $category_term-&amp;gt;term_id;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if (!empty($category_id)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product-&amp;gt;set_category_ids(array($category_id));&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product-&amp;gt;set_status(&#39;publish&#39;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $product_id = $product-&amp;gt;save();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // ذخیره ID محصول در متا فیلد پست&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; update_post_meta($post_id, &#39;_created_product_id&#39;, $product_id);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; } catch (Exception $e) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; error_log(&#39;Error creating/updating product: &#39; . $e-&amp;gt;getMessage());&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=17;" vertex="1" parent="ElqqVzK_Yuj_ti55asgk-51">
          <mxGeometry x="10" y="50" width="830" height="1830" as="geometry" />
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.623;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-31" target="ElqqVzK_Yuj_ti55asgk-48">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="600" />
              <mxPoint x="1040" y="620" />
              <mxPoint x="-180" y="620" />
              <mxPoint x="-180" y="150" />
              <mxPoint x="-1470" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ElqqVzK_Yuj_ti55asgk-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.988;entryY=0.115;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ElqqVzK_Yuj_ti55asgk-28" target="ElqqVzK_Yuj_ti55asgk-52">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="450" />
              <mxPoint x="1040" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
